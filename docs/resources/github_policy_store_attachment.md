---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "stepsecurity_github_policy_store_attachment Resource - stepsecurity"
subcategory: ""
description: |-
  
---

# stepsecurity_github_policy_store_attachment (Resource)



## Example Usage

```terraform
terraform {
  required_providers {
    stepsecurity = {
      source = "step-security/stepsecurity"
    }
  }
}

provider "stepsecurity" {
  api_key  = "xxxxxxxx" # can also be set as env variable STEP_SECURITY_API_KEY
  customer = "abcdefg"  # can also be set as env variable STEP_SECURITY_CUSTOMER
}


# Policy attachment with specific workflows
resource "stepsecurity_github_policy_store_attachment" "workflow-attachment" {
  owner       = "test-organization"
  policy_name = "workflow-policy"

  org = {
    apply_to_org = false
    repositories = [
      {
        name          = "myrepo"
        apply_to_repo = false
        workflows     = ["ci.yml", "deploy.yml"]
      },
      {
        name          = "other-repo"
        apply_to_repo = false
        workflows     = ["test.yml"]
      }
    ]
  }
}

# Policy attachment to entire repositories
resource "stepsecurity_github_policy_store_attachment" "repo-attachment" {
  owner       = "test-organization"
  policy_name = "repo-policy"

  org = {
    apply_to_org = false
    repositories = [
      {
        name          = "frontend-app"
        apply_to_repo = true
        workflows     = []
      },
      {
        name          = "backend-api"
        apply_to_repo = true
        workflows     = []
      },
      {
        name          = "shared-libs"
        apply_to_repo = true
        workflows     = []
      }
    ]
  }
}

# Policy attachment to entire organization
resource "stepsecurity_github_policy_store_attachment" "org-attachment" {
  owner       = "test-organization"
  policy_name = "org-policy"

  org = {
    apply_to_org = true
    repositories = []
  }
}

# Policy attachment to clusters
resource "stepsecurity_github_policy_store_attachment" "cluster-attachment" {
  owner       = "test-organization"
  policy_name = "cluster-policy"

  clusters = [
    "production-k8s-cluster",
    "staging-k8s-cluster"
  ]
}

# Complex attachment with mixed org and cluster attachments
resource "stepsecurity_github_policy_store_attachment" "mixed-attachment" {
  owner       = "test-organization"
  policy_name = "workflow-policy"

  org = {
    apply_to_org = false
    repositories = [
      {
        name          = "critical-repo"
        apply_to_repo = true
        workflows     = []
      },
      {
        name          = "staging-repo"
        apply_to_repo = false
        workflows     = ["test.yml", "deploy-staging.yml"]
      }
    ]
  }

  clusters = [
    "dev-k8s-cluster"
  ]
}

# For importing existing policy attachments to terraform state
import {
  to = stepsecurity_github_policy_store_attachment.workflow-attachment
  id = "test-organization:::workflow-policy" # format is <owner>:::<policy_name>
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `owner` (String) GitHub Organization (owner) name
- `policy_name` (String) Name of the policy to attach

### Optional

- `clusters` (List of String) List of cluster names for cluster-level attachments
- `org` (Attributes) Organization-level attachment configuration (see [below for nested schema](#nestedatt--org))

### Read-Only

- `id` (String) ID of the policy attachment. This is combination of owner and policy name.

<a id="nestedatt--org"></a>
### Nested Schema for `org`

Optional:

- `apply_to_org` (Boolean) If true, applies to entire organization
- `repositories` (Attributes List) List of repository-level attachments (see [below for nested schema](#nestedatt--org--repositories))

<a id="nestedatt--org--repositories"></a>
### Nested Schema for `org.repositories`

Required:

- `name` (String) Repository name

Optional:

- `apply_to_repo` (Boolean) If true, applies to entire repository
- `workflows` (List of String) List of specific workflows
