---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "stepsecurity_policy_driven_pr Resource - stepsecurity"
subcategory: ""
description: |-
  
---

# stepsecurity_policy_driven_pr (Resource)



## Example Usage

```terraform
# Copyright (c) HashiCorp, Inc.

terraform {
  required_providers {
    stepsecurity = {
      source = "registry.terraform.io/step-security/stepsecurity"
    }
  }
}

provider "stepsecurity" {
  api_key  = "09876"
  customer = "abcdefg"
}

# creates policy for auto remediation of findings detected by stepsecurity in selected repos by creating a pr.
resource "stepsecurity_policy_driven_pr" "test-organization" {
  owner          = "test-organization"
  selected_repos = ["test-repo-1", "test-repo-2"]
  auto_remediation_options = {
    create_pr                                     = true
    create_issue                                  = false
    create_github_advanced_security_alert         = false
    harden_github_hosted_runner                   = true
    pin_actions_to_sha                            = true
    restrict_github_token_permissions             = false
    actions_to_exempt_while_pinning               = ["actions/checkout", "actions/setup-node"]
    actions_to_replace_with_step_security_actions = ["EnricoMi/publish-unit-test-result-action"]
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `auto_remediation_options` (Attributes) (see [below for nested schema](#nestedatt--auto_remediation_options))
- `owner` (String) The owner/organization name where the policy-driven PR's to be created.
- `selected_repos` (List of String) List of repositories to apply the policy-driven PR to. Can provide ['*'] to apply to all current and future repositories.

### Read-Only

- `id` (String) The ID of the policy-driven PR. This is same as the owner/organization name.

<a id="nestedatt--auto_remediation_options"></a>
### Nested Schema for `auto_remediation_options`

Optional:

- `actions_to_exempt_while_pinning` (List of String) List of actions to exempt while pinning actions to SHA. When exempted, the action will not be pinned to SHA.
- `actions_to_replace_with_step_security_actions` (List of String) List of actions to replace with Step Security actions. When provided, the actions will be replaced with Step Security actions.
- `create_github_advanced_security_alert` (Boolean) Create a GitHub Advanced Security alert when a finding is detected. Note that this triggers only when issue creation is enabled.
- `create_issue` (Boolean) Create an issue when a finding is detected.
- `create_pr` (Boolean) Create a PR when a finding is detected.
- `harden_github_hosted_runner` (Boolean) When enabled, this creates a PR/issue to install security agent on the GitHub-hosted runner to prevent exfiltration of credentials, monitor the build process, and detect compromised dependencies.
- `pin_actions_to_sha` (Boolean) When enabled, this creates a PR/issue to pin actions to SHA. GitHub's Security Hardening guide recommends pinning actions to full length commit for third party actions.
- `restrict_github_token_permissions` (Boolean) When enabled, this creates a PR/issue to restrict GitHub token permissions. GitHub's Security Hardening guide recommends restricting permissions to the minimum required

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
# Copyright (c) HashiCorp, Inc.

terraform import stepsecurity_policy_driven_pr.test-organization test-organization
```
